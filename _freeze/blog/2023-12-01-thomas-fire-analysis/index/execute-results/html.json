{
  "hash": "50f0f2edf8e6eb5eecf1ccb00ce5db96",
  "result": {
    "markdown": "---\ntitle: \"Plotting AQI and Thomas Fire Burn Area in Santa Barbara County in Python \"\ndescription: \"This is an analysis that I did where I looked at daily air quality index values in Santa Barbara in 2017-2018 as well as the area burned by the Thomas Fire (2017) and plotted both.\"\nauthor:\n  - name: Fletcher McConnell\n    url: https://fletcher-m.github.io/\n   # orcid:\n    affiliation: MEDS\n    affiliation-url: https://bren.ucsb.edu/masters-programs/master-environmental-data-science/academics-meds\n # - name: other person\ndate: 12-01-2023\ncategories: [Quarto, MEDS, Fire, Visualization]\nbibliography: references.bib\ncitation:\n  url: https://fletcher-m.github.io/blog/2023-12-01-eds220-final-project/\nimage: download.jpeg\n#image: ocean_data_image.jpeg\n# draft: true --> This setting will not show your blog post on your website but you can still see from url\neval: FALSE\n---\n\n# Plotting AQI in Santa Barbara and Thomas Fire Burn Area Map\n\nFor this project, I looked into constructing a plot of air quality index (AQI) values for Santa Barbara from 2017 to 2018. I also constructed an overlay of the Thomas Fire burn area on a false color image of Santa Barbara county.\n\nLink to Github Repository: https://github.com/fletcher-m/aqi-thomas-fire-sb\n\n## Plotting AQI in Santa Barbara\n\nThe main goal for this section of the project was to develop a plot in order to visibly see if I could pick out a spike in AQI values during the time of the Thomas Fire in 2017. Fires tend to lead to spikes in AQI values, due to the amount of smoke that they emit. I expected to see that spike sometime around December of 2017.\n\nThe data that I used for plotting AQI values was AQI data for the years of 2017-2018. If you would like to see what data I used and other coding steps that I took, please check out the GitHub repository linked above. Generally, I combined the data, filtered to the Santa Barbara County and made some updates in order to simplify the data frame. An important note is that I converted the date column to a datetime object in order to plot this. \"aqi_sb\" is the data frame that I had wrangled in some previous steps.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\n# update the 'date' column to a datetime object and override the 'date' column with the output\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# set date column as index\naqi_sb = aqi_sb.set_index('date')\n\n# check to make sure the index is the 'date' column --> The data type of the index is 'datetime64'\naqi_sb.index\n```\n:::\n\n\nAfter I had the data in the correct format, time frame and target area, all that was left was to plot the information so that I could easily visualize it. I plotted a 5 day average along with daily AQI values to give a better idea of longer trends in the data. Below is the final plot.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code code-fold=\"true\"}\n# assign line colors for 'aqi' and 'five_day_average' \ncolors = {'aqi': 'red',\n         'five_day_average': 'black'}\n\n# make a line plot for 'aqi' and 'five_day_average' over time\naqi_sb[['aqi', 'five_day_average']].plot(title=\"Daily AQI in Santa Barbara (2017-2018)\",\n                                       color=colors,\n                                        ylabel='AQI')\n```\n:::\n\n\n![](images/aqi_sb.png)\n\nAs you can see from the plot, there is an obvious spike around December of 2017, which is what I expected. The Thomas Fire was quite large and left a massive burn area in its wake. In the next section, I will plot that burn area and show it in relation to Santa Barbara County.\n\n## Plotting Image of Santa Barbara With Thomas Fire Boundary\n\nI first set about plotting an image of Santa Barbara using data collected from satellite. There were a couple of steps before this, which you can see on my github repository (link above). This first plot uses the \"red\", \"green\", and \"blue\" bands in order to create a true color image. Below, you can see that image plotted with the Santa Barbara region and Channel Islands off of the coast.\n\n::: {.cell execution_count=3}\n``` {.python .cell-code code-fold=\"true\"}\n# select red, green and blue variables from the NetCDF data and plot \nbands[['red', 'green', 'blue']].to_array().plot.imshow(robust = TRUE)\n```\n:::\n\n\n![](images/map.png)\n\nAfter plotting this true color image of the Santa Barbara region, I wanted to see what a false color image would look like. This followed the same process, only selecting different bands to display. Instead of \"red\", \"green\" and \"blue\", I chose short-wave infrared (SWIR22), near-infrared (NIR08), and red bands. Below is a plot of what that looks like.\n\n::: {.cell execution_count=4}\n``` {.python .cell-code code-fold=\"true\"}\n# select short wave infrared, near-infrared and red variables and plot\nbands[['swir22', 'nir08', 'red']].to_array().plot.imshow(robust=True)\n```\n:::\n\n\n![](images/false_image.png)\n\nIn order to find the burn area for the Thomas Fire (2017), I had to do some filtering of the fire data so that I ended up with only data about the Thomas Fire.\n\n::: {.cell execution_count=5}\n``` {.python .cell-code code-fold=\"true\"}\n# initiate figure\nfig, ax = plt.subplots(figsize=(6,6))\n\n# plot false color image of Santa Barbara\nfalse_color.plot.imshow(ax=ax, robust=True)\n\n# plot Thomas Fire region\nthomas_fire.plot(ax=ax, color='red', alpha=0.5, edgecolor='black', linewidth=0.5)\nthomas_patch = mpatches.Patch(color='red', label='Thomas Fire')\n\n# create legend\nax.legend(handles=[thomas_patch], frameon=True, loc='upper right', bbox_to_anchor=(1.4, 1))\nax.set_title('False Color Image of Santa Barbara with Thomas Fire Boundary')\n```\n:::\n\n\n![](images/thomas_fire.png)\n\n## Summary and Take-Aways\n\nVisualizing data is almost always the best way to gain a grasp on data. Looking at the raw data for AQI values in Santa Barbara would have led to seeing high numbers during the Thomas Fire, but the line plot really puts it into perspective. Overlaying the burn area is also a great way to show the impact of the fire.\n\nI think that at times, it is easy to get caught up in the data, forgetting where it all came from, so I want to briefly describe the impact of the fire that I analyzed. The Thomas Fire was the largest fire in modern California history, burning 273,400 acres over a period of 6 months [@thethom]. It was the 3rd most destructive in structure losses, destroying 1,063 buildings [@thethom]. There were many factors that led to the size of this fire, including strong Santa Ana winds that fanned the flames, and it will undoubtedly remain in the top of the charts for California fires.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}